{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Episode",
  "type": "object",
  "properties": {
    "episode_id": {
      "type": "integer",
      "description": "User Guidance: A unique identifier for each Episode."
    },
    "person_id": {
      "type": "integer",
      "description": "User Guidance: The PERSON_ID of the PERSON for whom the episode is recorded."
    },
    "episode_concept_id": {
      "type": "integer",
      "description": "User Guidance: The EPISODE_CONCEPT_ID represents the kind abstraction related to the disease phase, outcome or treatment.\n\nETL Conventions: Choose a concept in the Episode domain that best represents the ongoing disease phase, outcome, or treatment. Please see [article] for cancers and [article] for non-cancers describing how these are defined. [Accepted Concepts](https://athena.ohdsi.org/search-terms/terms?domain=Episode&page=1&pageSize=15&query=)",
      "oneOf": [
        {
          "const": 0,
          "title": "0 - No matching concept"
        },
        {
          "const": 32531,
          "title": "32531 - Treatment Regimen"
        },
        {
          "const": 32532,
          "title": "32532 - Treatment Cycle"
        },
        {
          "const": 32533,
          "title": "32533 - Disease Episode"
        },
        {
          "const": 32939,
          "title": "32939 - Cancer Surgery"
        },
        {
          "const": 32940,
          "title": "32940 - Cancer Radiotherapy"
        },
        {
          "const": 32941,
          "title": "32941 - Cancer Drug Treatment"
        },
        {
          "const": 32942,
          "title": "32942 - Confined Disease"
        },
        {
          "const": 32943,
          "title": "32943 - Invasive Disease"
        },
        {
          "const": 32944,
          "title": "32944 - Metastatic Disease"
        },
        {
          "const": 32945,
          "title": "32945 - Remission"
        },
        {
          "const": 32946,
          "title": "32946 - Complete Remission"
        },
        {
          "const": 32947,
          "title": "32947 - Partial Remission"
        },
        {
          "const": 32948,
          "title": "32948 - Stable Disease"
        },
        {
          "const": 32949,
          "title": "32949 - Progression"
        }
      ]
    },
    "episode_start_date": {
      "type": "string",
      "format": "date",
      "description": "User Guidance: The date when the Episode beings.\n\nETL Conventions: Please see [article] for how to define an Episode start date."
    },
    "episode_start_datetime": {
      "type": "string",
      "format": "date-time",
      "description": "User Guidance: The date and time when the Episode begins."
    },
    "episode_end_date": {
      "type": "string",
      "format": "date",
      "description": "User Guidance: The date when the instance of the Episode is considered to have ended.\n\nETL Conventions: Please see [article] for how to define an Episode end date."
    },
    "episode_end_datetime": {
      "type": "string",
      "format": "date-time",
      "description": "User Guidance: The date when the instance of the Episode is considered to have ended."
    },
    "episode_parent_id": {
      "type": "integer",
      "description": "User Guidance: Use this field to find the Episode that subsumes the given Episode record. This is used in the case that an Episode are nested into each other.\n\nETL Conventions: If there are multiple nested levels to how Episodes are represented, the EPISODE_PARENT_ID can be used to record this relationship."
    },
    "episode_number": {
      "type": "integer",
      "description": "User Guidance: For sequences of episodes, this is used to indicate the order the episodes occurred. For example, lines of treatment could be indicated here.\n\nETL Conventions: Please see [article] for the details of how to count episodes."
    },
    "episode_object_concept_id": {
      "type": "integer",
      "description": "User Guidance: A Standard Concept representing the disease phase, outcome, or other abstraction of which the episode consists.  For example, if the EPISODE_CONCEPT_ID is [treatment regimen](https://athena.ohdsi.org/search-terms/terms/32531) then the EPISODE_OBJECT_CONCEPT_ID should contain the chemotherapy regimen concept, like [Afatinib monotherapy](https://athena.ohdsi.org/search-terms/terms/35804392).\n\nETL Conventions: Episode entries from the 'Disease Episode' concept class should have an episode_object_concept_id that comes from the Condition domain.  Episode entries from the 'Treatment Episode' concept class should have an episode_object_concept_id that scome from the 'Procedure' domain or 'Regimen' concept class."
    },
    "episode_type_concept_id": {
      "type": "integer",
      "description": "User Guidance: This field can be used to determine the provenance of the Episode record, as in whether the episode was from an EHR system, insurance claim, registry, or other sources.\n\nETL Conventions: Choose the EPISODE_TYPE_CONCEPT_ID that best represents the provenance of the record. [Accepted Concepts](https://athena.ohdsi.org/search-terms/terms?domain=Type+Concept&standardConcept=Standard&page=1&pageSize=15&query=). A more detailed explanation of each Type Concept can be found on the [vocabulary wiki](https://github.com/OHDSI/Vocabulary-v5.0/wiki/Vocab.-TYPE_CONCEPT).",
      "oneOf": [
        {
          "const": 0,
          "title": "0 - No matching concept"
        },
        {
          "const": 32809,
          "title": "32809 - Case Report Form"
        },
        {
          "const": 32810,
          "title": "32810 - Claim"
        },
        {
          "const": 32811,
          "title": "32811 - Claim authorization"
        },
        {
          "const": 32812,
          "title": "32812 - Claim discharge record"
        },
        {
          "const": 32813,
          "title": "32813 - Claim enrolment record"
        },
        {
          "const": 32814,
          "title": "32814 - Cost record"
        },
        {
          "const": 32815,
          "title": "32815 - Death Certificate"
        },
        {
          "const": 32816,
          "title": "32816 - Dental claim"
        },
        {
          "const": 32817,
          "title": "32817 - EHR"
        },
        {
          "const": 32818,
          "title": "32818 - EHR administration record"
        },
        {
          "const": 32819,
          "title": "32819 - EHR admission note"
        },
        {
          "const": 32820,
          "title": "32820 - EHR ancillary report"
        },
        {
          "const": 32821,
          "title": "32821 - EHR billing record"
        },
        {
          "const": 32822,
          "title": "32822 - EHR chief complaint"
        },
        {
          "const": 32823,
          "title": "32823 - EHR discharge record"
        },
        {
          "const": 32824,
          "title": "32824 - EHR discharge summary"
        },
        {
          "const": 32825,
          "title": "32825 - EHR dispensing record"
        },
        {
          "const": 32826,
          "title": "32826 - EHR emergency room note"
        },
        {
          "const": 32827,
          "title": "32827 - EHR encounter record"
        },
        {
          "const": 32828,
          "title": "32828 - EHR episode record"
        },
        {
          "const": 32829,
          "title": "32829 - EHR inpatient note"
        },
        {
          "const": 32830,
          "title": "32830 - EHR medication list"
        },
        {
          "const": 32831,
          "title": "32831 - EHR note"
        },
        {
          "const": 32832,
          "title": "32832 - EHR nursing report"
        },
        {
          "const": 32833,
          "title": "32833 - EHR order"
        },
        {
          "const": 32834,
          "title": "32834 - EHR outpatient note"
        },
        {
          "const": 32835,
          "title": "32835 - EHR Pathology report"
        },
        {
          "const": 32836,
          "title": "32836 - EHR physical examination"
        },
        {
          "const": 32837,
          "title": "32837 - EHR planned dispensing record"
        },
        {
          "const": 32838,
          "title": "32838 - EHR prescription"
        },
        {
          "const": 32839,
          "title": "32839 - EHR prescription issue record"
        },
        {
          "const": 32840,
          "title": "32840 - EHR problem list"
        },
        {
          "const": 32841,
          "title": "32841 - EHR radiology report"
        },
        {
          "const": 32842,
          "title": "32842 - EHR referral record"
        },
        {
          "const": 32843,
          "title": "32843 - External CDM instance"
        },
        {
          "const": 32844,
          "title": "32844 - Facility claim"
        },
        {
          "const": 32845,
          "title": "32845 - Facility claim detail"
        },
        {
          "const": 32846,
          "title": "32846 - Facility claim header"
        },
        {
          "const": 32847,
          "title": "32847 - Geographic isolation record"
        },
        {
          "const": 32848,
          "title": "32848 - Government report"
        },
        {
          "const": 32849,
          "title": "32849 - Health Information Exchange record"
        },
        {
          "const": 32850,
          "title": "32850 - Health Risk Assessment"
        },
        {
          "const": 32851,
          "title": "32851 - Healthcare professional filled survey"
        },
        {
          "const": 32852,
          "title": "32852 - Hospital cost"
        },
        {
          "const": 32853,
          "title": "32853 - Inpatient claim"
        },
        {
          "const": 32854,
          "title": "32854 - Inpatient claim detail"
        },
        {
          "const": 32855,
          "title": "32855 - Inpatient claim header"
        },
        {
          "const": 32856,
          "title": "32856 - Lab"
        },
        {
          "const": 32857,
          "title": "32857 - Mail order record"
        },
        {
          "const": 32858,
          "title": "32858 - NLP"
        },
        {
          "const": 32859,
          "title": "32859 - Outpatient claim"
        },
        {
          "const": 32860,
          "title": "32860 - Outpatient claim detail"
        },
        {
          "const": 32861,
          "title": "32861 - Outpatient claim header"
        },
        {
          "const": 32862,
          "title": "32862 - Patient filled survey"
        },
        {
          "const": 32863,
          "title": "32863 - Patient or payer paid record"
        },
        {
          "const": 32864,
          "title": "32864 - Patient reported cost"
        },
        {
          "const": 32865,
          "title": "32865 - Patient self-report"
        },
        {
          "const": 32866,
          "title": "32866 - Payer system record (paid premium)"
        },
        {
          "const": 32867,
          "title": "32867 - Payer system record (primary payer)"
        },
        {
          "const": 32868,
          "title": "32868 - Payer system record (secondary payer)"
        },
        {
          "const": 32869,
          "title": "32869 - Pharmacy claim"
        },
        {
          "const": 32870,
          "title": "32870 - Pre-qualification time period"
        },
        {
          "const": 32871,
          "title": "32871 - Professional claim"
        },
        {
          "const": 32872,
          "title": "32872 - Professional claim detail"
        },
        {
          "const": 32873,
          "title": "32873 - Professional claim header"
        },
        {
          "const": 32874,
          "title": "32874 - Provider charge list price"
        },
        {
          "const": 32875,
          "title": "32875 - Provider financial system"
        },
        {
          "const": 32876,
          "title": "32876 - Provider incurred cost record"
        },
        {
          "const": 32877,
          "title": "32877 - Randomization record"
        },
        {
          "const": 32878,
          "title": "32878 - Reference lab"
        },
        {
          "const": 32879,
          "title": "32879 - Registry"
        },
        {
          "const": 32880,
          "title": "32880 - Standard algorithm"
        },
        {
          "const": 32881,
          "title": "32881 - Standard algorithm from claims"
        },
        {
          "const": 32882,
          "title": "32882 - Standard algorithm from EHR"
        },
        {
          "const": 32883,
          "title": "32883 - Survey"
        },
        {
          "const": 32884,
          "title": "32884 - Urgent lab"
        },
        {
          "const": 32885,
          "title": "32885 - US Social Security Death Master File"
        },
        {
          "const": 32886,
          "title": "32886 - Vision claim"
        },
        {
          "const": 703249,
          "title": "703249 - Point of care/express lab"
        },
        {
          "const": 705183,
          "title": "705183 - Patient self-tested"
        }
      ]
    },
    "episode_source_value": {
      "type": "string",
      "maxLength": 50,
      "description": "User Guidance: The source code for the Episode as it appears in the source data. This code is mapped to a Standard Condition Concept in the Standardized Vocabularies and the original code is stored here for reference."
    },
    "episode_source_concept_id": {
      "type": "integer",
      "description": "User Guidance: A foreign key to a Episode Concept that refers to the code used in the source.\n\nETL Conventions: Given that the Episodes are user-defined it is unlikely that there will be a Source Concept available. If that is the case then set this field to zero."
    }
  },
  "required": [
    "episode_id",
    "person_id",
    "episode_concept_id",
    "episode_start_date",
    "episode_object_concept_id",
    "episode_type_concept_id"
  ],
  "x-primaryKey": [
    "episode_id"
  ],
  "x-foreignKeys": [
    {
      "field": "person_id",
      "table": "PERSON",
      "fieldInTable": "PERSON_ID"
    },
    {
      "field": "episode_concept_id",
      "table": "CONCEPT",
      "fieldInTable": "CONCEPT_ID",
      "domain": "Episode"
    },
    {
      "field": "episode_object_concept_id",
      "table": "CONCEPT",
      "fieldInTable": "CONCEPT_ID",
      "domain": "Procedure, Regimen"
    },
    {
      "field": "episode_type_concept_id",
      "table": "CONCEPT",
      "fieldInTable": "CONCEPT_ID",
      "domain": "Type Concept"
    },
    {
      "field": "episode_source_concept_id",
      "table": "CONCEPT",
      "fieldInTable": "CONCEPT_ID"
    }
  ]
}